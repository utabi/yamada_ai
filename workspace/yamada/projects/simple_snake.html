<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>山田のシンプルスネーク</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #2c3e50;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: monospace;
        }
        #game {
            text-align: center;
        }
        canvas {
            border: 2px solid #ecf0f1;
            background: #34495e;
        }
        #score {
            color: #ecf0f1;
            font-size: 20px;
            margin: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 5px;
            cursor: pointer;
        }
        #info {
            color: #ecf0f1;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="game">
        <div id="score">スコア: <span id="points">0</span></div>
        <canvas id="canvas" width="300" height="300"></canvas>
        <div>
            <button onclick="startGame()">スタート</button>
            <button onclick="resetGame()">リセット</button>
        </div>
        <div id="info">矢印キーまたはWASDで操作</div>
    </div>

    <script>
        // 超シンプル版スネークゲーム
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const box = 15;
        const rows = canvas.height / box;
        const cols = canvas.width / box;
        
        let snake = [{x: 10, y: 10}];
        let food = {x: 15, y: 15};
        let dx = 0;
        let dy = 0;
        let score = 0;
        let gameActive = false;
        
        function draw() {
            // クリア
            ctx.fillStyle = '#34495e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // スネークを描く
            ctx.fillStyle = '#2ecc71';
            for (let s of snake) {
                ctx.fillRect(s.x * box, s.y * box, box - 2, box - 2);
            }
            
            // 食べ物を描く
            ctx.fillStyle = '#e74c3c';
            ctx.fillRect(food.x * box, food.y * box, box - 2, box - 2);
        }
        
        function update() {
            if (!gameActive) return;
            
            // 頭の新しい位置
            let head = {x: snake[0].x + dx, y: snake[0].y + dy};
            
            // 壁チェック
            if (head.x < 0 || head.x >= cols || head.y < 0 || head.y >= rows) {
                gameOver();
                return;
            }
            
            // 自分にぶつかったかチェック
            for (let s of snake) {
                if (head.x === s.x && head.y === s.y) {
                    gameOver();
                    return;
                }
            }
            
            snake.unshift(head);
            
            // 食べ物を食べた？
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                document.getElementById('points').textContent = score;
                newFood();
            } else {
                snake.pop();
            }
            
            draw();
        }
        
        function newFood() {
            food = {
                x: Math.floor(Math.random() * cols),
                y: Math.floor(Math.random() * rows)
            };
        }
        
        function startGame() {
            if (!gameActive) {
                gameActive = true;
                dx = 1;
                dy = 0;
                gameLoop();
            }
        }
        
        function resetGame() {
            gameActive = false;
            snake = [{x: 10, y: 10}];
            dx = 0;
            dy = 0;
            score = 0;
            document.getElementById('points').textContent = score;
            newFood();
            draw();
        }
        
        function gameOver() {
            gameActive = false;
            alert('ゲームオーバー！ スコア: ' + score);
        }
        
        function gameLoop() {
            if (gameActive) {
                update();
                setTimeout(gameLoop, 100);
            }
        }
        
        // キー操作（WASDと矢印キー両対応）
        document.addEventListener('keydown', function(e) {
            if (!gameActive) return;
            
            // 矢印キーの場合はスクロールを防ぐ
            if (e.key.includes('Arrow')) {
                e.preventDefault();
            }
            
            switch(e.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    if (dy === 0) {
                        dx = 0; dy = -1;
                    }
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    if (dy === 0) {
                        dx = 0; dy = 1;
                    }
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    if (dx === 0) {
                        dx = -1; dy = 0;
                    }
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    if (dx === 0) {
                        dx = 1; dy = 0;
                    }
                    break;
            }
        });
        
        // 初期描画
        draw();
    </script>
</body>
</html>